{% load static %}
{% load compress %}

<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zmiana hasła – MIKO</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Rubik" />
    {% compress css %}
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/auth.css' %}">
    {% endcompress %}
    {% compress js %}
    <script src="{% static 'script.js' %}"></script>
    {% endcompress %}
</head>

<body>
{% include "header.html" %}

<main class="auth-page">
    <div class="auth-shell">
        <section class="auth-panel auth-panel--hero">
            <img class="auth-hero-logo" src="{% static 'logoDark.svg' %}" alt="MIKO">
            <h1 class="auth-title" style="color: white;">Zmiana hasła</h1>
            <p class="auth-subtitle">
                Ustaw nowe hasło zgodne z zasadami.
            </p>
        </section>

        <section class="auth-panel">
            <h1 class="auth-title">Zmień hasło</h1>

            <form class="auth-form" method="post">
                {% csrf_token %}

                <div class="auth-field">
                    <label for="old_password">Obecne hasło</label>
                    <input class="auth-input" type="password" name="old_password" id="old_password" required>
                </div>

                {% if pwd_help_texts %}
                    <div class="auth-help">
                        <ul>
                            {% for txt in pwd_help_texts %}
                                <li>{{ txt }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                <div class="auth-field">
                    <label for="new_password1">Nowe hasło</label>
                    <input class="auth-input" type="password" name="new_password1" id="new_password1" required>
                </div>

                <div class="auth-field">
                    <label for="new_password2">Powtórz nowe hasło</label>
                    <input class="auth-input" type="password" name="new_password2" id="new_password2" required>
                </div>
                
                {% if custom_message %}
                    <div class="flash {% if 'zmien' in custom_message|lower %}flash--ok{% endif %}">{{ custom_message }}</div>
                {% endif %}

                <div class="auth-actions">
                    <button class="btn btn-primary" type="submit">Zapisz hasło</button>
                    <a class="btn btn-secondary" href="/profile/">Wróć do profilu</a>
                </div>
            </form>
        </section>
    </div>
</main>

{% include "footer.html" %}
</body>
</html>
